<header>
    <div class="navbar">
        <ul class="nav navbar-nav">
            <li class="navbar-brand"><img src="/img/favicon.png" height="30" alt=""/></li>
            <li class="active"><a href="/market/listings">Listings</a></li>
            <li><a href="/market/articles">Articles</a></li>
            <li><a href="#">Link</a></li>
        </ul>
        <div class="btn-group pull-right">
            <button class="btn btn-small btn-success" ng-class="{'disabled': !activeItem  }">Publish Selected</button>
            <button class="btn btn-small btn-danger"
                    ng-class="{'disabled': (!activeItem || notPublished(activeItem)) }">Unpublish Selected
            </button>
        </div>
    </div>
</header>
<div class="roomba-wrap">
    <div class="row">
        <div class="col-lg-2 market-filter" ng-controller="MarketFilterCtrl">
            <div class="row">
                <div class="col-lg-12 header-actions">
                    <div class="btn-group">
                        <button type="button" class="btn btn-inverse dropdown-toggle" data-toggle="dropdown">
                            {{ activeTag }} <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu">
                            <li ng-class="{'active': isActive}" ng-repeat="(tag, isActive) in tags"><a
                                    href="javascript:" ng-click="changeTag(tag)">{{ tag }}</a></li>
                        </ul>
                    </div>
                    <button type="button" class="btn btn-success">+</button>
                </div>
            </div>
            <div class="row scroll-container">
                <div class="scroll-wrap">
                    <div class="col-lg-12">
                        <ul ng-repeat="discreet in dimensions.discreet" class="ribbon-nav">
                            <li class="header">{{discreet.title}}</li>
                            <li ng-repeat="value in discreet.values"
                                ng-class="{'active': value.isSelected}"
                                ng-click="toggleDiscreet(discreet, value)"><a href="javascript:">{{value.title}}</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-3 market-list" ng-controller="MarketListCtrl">
            <div class="row">
                <div class="col-lg-12 header-actions">
                    <div class="btn-group">
                        <button type="button" class="btn btn-inverse dropdown-toggle" data-toggle="dropdown">
                            Sort <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu">
                            <li ng-class="{'active': isActive}" ng-repeat="(sortField, isActive) in sortFields">
                                <a href="javascript:" ng-click="setSortField(sortField)">{{ sortField }}</a>
                            </li>
                        </ul>
                    </div>
                    <div class="btn-group pull-right">
                        <button class="btn" ng-class="{'disabled': !activeItem}">Save</button>
                    </div>
                </div>
            </div>
            <div class="scroll-container">
                <div class="scroll-wrap" chunk="items | limitVisible | orderBy:sortBy" chunk-size="100">
                    <div class="row listing-list-item" ng-repeat="item in chunk">
                        <!--<div class="col-lg-1 col-sm-1 col-1"><input type="checkbox"/></div>-->
                        <!--<div class="col-lg-1 col-sm-1 col-1"><i class="icon-star"></i></div>-->
                        <!--<div class="col-lg-1 col-sm-1 col-1"><i class="icon-ban-circle"></i></div>-->
                        <div class="col-lg-12 col-sm-6 col-6 list-item-title" ng-click="openDetails(item.id)">
                            {{item.title}}
                        </div>
                        <!--<div class="col-lg-3 col-sm-3 col-3">-->
                        <!--<div class="progress">-->
                        <!--<div class="progress-bar" style="width: 60%;"></div>-->
                        <!--</div>-->
                        <!--</div>-->
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-7 market-details" ng-controller="DetailsCtrl">
            <div class="row">
                <div class="col-lg-12 header-actions">
                    <div class="btn-group">
                        <button class="btn btn-success" ng-class="{'disabled': !activeItem}">Publish</button>
                        <button class="btn btn-danger"
                                ng-class="{'disabled': (!activeItem || notPublished(activeItem)) }">Unpublish
                        </button>
                    </div>

                    <div class="btn-group pull-right">
                        <button class="btn" ng-click="saveItem(activeItem)" ng-class="{'disabled': !activeItem}">Save</button>
                    </div>
                </div>
            </div>

            <div class="scroll-container row" ng-show="activeItem" spinner="activeItem.$spinner" spinner-size="large">
                <div class="scroll-wrap">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="page-header"><h4>{{ activeItem.title }}</h4></div>

                            <form class="form-horizontal">
                                <div class="form-group" ng-repeat="(field, value) in collection.fields">
                                    <label class="col-lg-2 control-label">
                                        {{ value.title }}
                                    </label>

                                    <div class="col-lg-9">
                                        <input type="text" class="form-control"
                                               ng-hide="activeItem.raw[field].showRaw"
                                               ng-model="activeItem.edited[field]"/>
                                        <input type="text" class="form-control"
                                               ng-show="activeItem.raw[field].showRaw"
                                               ng-model="activeItem.raw[field].value"/>
                                    </div>
                                    <button class="btn col-lg-1" ng-click="copyFromRaw(activeItem, field)"
                                            ng-hide="isNull(activeItem.raw[field].status)"
                                            ng-mouseover="activeItem.raw[field].showRaw = true"
                                            ng-mouseleave="activeItem.raw[field].showRaw = false"
                                            ng-click="copyFromRaw(itemResource, resourceFieldKey)">
                                        Raw
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="model-group" ng-repeat="(resourceKey, resource) in collection.resources"
                                 ng-controller="ResourceCtrl">
                                <h4>{{ resource.title }}</h4>
                                <table class="table table-striped">
                                    <thead>
                                    <tr>
                                        <th class="table-icon-action table-icon-success"
                                            ng-click="addResource(resourceKey, newResource)">

                                            <i class="icon-plus-sign"></i>
                                        </th>
                                        <th ng-repeat="(resourceFieldKey, resourceField) in resource.fields">
                                            <input type="text" ng-model="newResource[resourceFieldKey]"
                                                   placeholder="{{resourceField.title}}"/>
                                        </th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr ng-repeat="itemResource in activeItemResources[resourceKey]">
                                        <td class="table-icon-action table-icon-error"
                                            ng-click="removeResource(resourceKey, itemResource.id)">
                                            <i class="icon-remove-sign"></i>
                                        </td>
                                        <td ng-repeat="(resourceFieldKey, resourceField) in resource.fields">
                                            <input ng-hide="itemResource.raw[resourceFieldKey].showRaw" type="text"
                                                   ng-model="itemResource.edited[resourceFieldKey]"/>
                                            <input class="input-overlay status-{{itemResource.raw[resourceFieldKey].status}}"
                                                   ng-show="itemResource.raw[resourceFieldKey].showRaw" readonly
                                                   type="text" ng-model="itemResource.raw[resourceFieldKey].value"/>

                                            <div class="table-input-action"
                                                 ng-hide="isNull(itemResource.raw[resourceFieldKey].status)"
                                                 ng-mouseover="itemResource.raw[resourceFieldKey].showRaw = true"
                                                 ng-mouseleave="itemResource.raw[resourceFieldKey].showRaw = false"
                                                 ng-click="copyFromRaw(itemResource, resourceFieldKey)">Raw
                                            </div>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>